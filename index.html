<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Denver News Station 5</title>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --red: #C8102E;
  --dark-red: #8B0A1E;
  --black: #0A0A0A;
  --dark: #141414;
  --mid: #1E1E1E;
  --border: #2A2A2A;
  --gold: #D4A843;
  --white: #F4F1EB;
  --text: #DEDBD3;
  --muted: #888;
}

body { background: var(--black); color: var(--text); font-family: Georgia, 'Times New Roman', serif; min-height: 100vh; }

/* BREAKING BAR */
.breaking-bar { background: var(--red); display: flex; align-items: center; height: 34px; overflow: hidden; }
.breaking-label { background: var(--black); color: var(--red); font-family: monospace; font-size: 11px; font-weight: bold; letter-spacing: 2px; padding: 0 14px; height: 100%; display: flex; align-items: center; flex-shrink: 0; gap: 8px; }
.live-dot { width: 8px; height: 8px; background: var(--red); border-radius: 50%; animation: pulse 1.4s infinite; }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.3;transform:scale(1.4)} }
.ticker-wrap { flex: 1; overflow: hidden; height: 100%; display: flex; align-items: center; }
.ticker { white-space: nowrap; font-family: monospace; font-size: 12px; letter-spacing: 1px; color: #fff; padding-left: 40px; animation: ticker 35s linear infinite; }
@keyframes ticker { 0%{transform:translateX(100vw)} 100%{transform:translateX(-100%)} }

/* HEADER */
.site-header { background: var(--dark); border-bottom: 3px solid var(--red); }
.header-main { display: flex; align-items: center; justify-content: space-between; padding: 20px 40px; border-bottom: 1px solid var(--border); }
.header-logo { display: flex; align-items: center; gap: 16px; }
.logo-badge { width: 64px; height: 64px; background: var(--red); color: #fff; font-family: Georgia, serif; font-size: 44px; font-weight: 900; display: flex; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 0 3px var(--dark-red), 0 4px 20px rgba(200,16,46,0.4); flex-shrink: 0; }
.logo-badge.sm { width: 28px; height: 28px; font-size: 18px; }
.logo-city { font-size: 34px; font-weight: 900; color: var(--white); letter-spacing: 3px; display: block; }
.logo-sub { font-family: monospace; font-size: 13px; letter-spacing: 4px; color: var(--gold); display: block; margin-top: 2px; }
.header-date { font-family: monospace; font-size: 12px; color: var(--muted); text-align: right; line-height: 1.6; }

/* NAV */
.main-nav { display: flex; padding: 0 40px; background: var(--mid); gap: 4px; }
.nav-btn { background: none; border: none; border-bottom: 3px solid transparent; color: var(--muted); font-family: monospace; font-size: 12px; letter-spacing: 2px; padding: 14px 22px; cursor: pointer; transition: all 0.2s; }
.nav-btn:hover { color: var(--white); background: rgba(255,255,255,0.04); }
.nav-btn.active { color: var(--white); border-bottom-color: var(--red); }

/* TABS */
.tab { display: none; } .tab.active { display: block; }

/* HOMEPAGE */
.homepage { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
.hero-placeholder { background: var(--mid); border: 2px dashed var(--border); border-radius: 6px; padding: 80px 40px; text-align: center; color: var(--muted); font-family: monospace; font-size: 14px; }
.hero-article { display: grid; grid-template-columns: 1fr 420px; background: var(--dark); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; min-height: 400px; cursor: pointer; }
.hero-article:hover { border-color: var(--red); }
.hero-img-wrap img { width: 100%; height: 100%; min-height: 400px; object-fit: cover; display: block; }
.hero-no-img { background: linear-gradient(135deg, #2a0a10 0%, #0a0a0a 100%); min-height: 400px; display: flex; align-items: center; justify-content: center; font-size: 160px; font-weight: 900; color: rgba(200,16,46,0.15); }
.hero-info { padding: 40px; display: flex; flex-direction: column; justify-content: flex-end; }
.cat-tag { font-family: monospace; font-size: 10px; letter-spacing: 2px; color: var(--red); background: rgba(200,16,46,0.15); border: 1px solid rgba(200,16,46,0.3); padding: 4px 10px; border-radius: 2px; display: inline-block; margin-bottom: 14px; }
.hero-info h2 { font-size: 30px; font-weight: 700; color: var(--white); line-height: 1.25; margin-bottom: 12px; }
.art-meta { font-family: monospace; font-size: 11px; color: var(--muted); letter-spacing: 1px; margin-bottom: 14px; }
.hero-excerpt { font-size: 15px; color: var(--text); line-height: 1.7; margin-bottom: 20px; }
.read-btn { background: var(--red); color: #fff; border: none; font-family: monospace; font-size: 11px; letter-spacing: 2px; padding: 10px 20px; border-radius: 2px; cursor: pointer; align-self: flex-start; transition: background 0.2s; }
.read-btn:hover { background: var(--dark-red); }

.news-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px; margin-top: 40px; }
.card { background: var(--dark); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; cursor: pointer; transition: transform 0.2s, border-color 0.2s; }
.card:hover { transform: translateY(-3px); border-color: var(--red); }
.card-img { width: 100%; height: 200px; object-fit: cover; }
.card-no-img { width: 100%; height: 200px; background: linear-gradient(135deg, var(--mid), var(--dark)); display: flex; align-items: center; justify-content: center; font-size: 60px; font-weight: 900; color: rgba(200,16,46,0.12); }
.card-body { padding: 20px; }
.card-body h3 { font-size: 19px; font-weight: 700; color: var(--white); margin: 10px 0 8px; line-height: 1.3; }
.card-excerpt { font-size: 13px; color: var(--muted); line-height: 1.6; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }

/* MODAL */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.88); z-index: 1000; display: flex; align-items: flex-start; justify-content: center; padding: 40px 20px; overflow-y: auto; backdrop-filter: blur(4px); }
.modal-box { background: var(--dark); border: 1px solid var(--border); border-radius: 8px; max-width: 800px; width: 100%; position: relative; animation: mIn 0.22s ease; }
@keyframes mIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
.modal-close { position: absolute; top: 14px; right: 14px; background: rgba(0,0,0,0.6); border: 1px solid var(--border); color: var(--muted); width: 34px; height: 34px; border-radius: 50%; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.2s; }
.modal-close:hover { color: var(--white); border-color: var(--red); }
.modal-img { width: 100%; max-height: 400px; object-fit: cover; border-radius: 8px 8px 0 0; display: block; }
.modal-content { padding: 36px; }
.modal-content h2 { font-size: 30px; color: var(--white); margin: 14px 0 10px; line-height: 1.25; }
.modal-caption { font-family: monospace; font-size: 11px; color: var(--muted); font-style: italic; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.modal-body { font-size: 17px; line-height: 1.85; color: var(--text); }
.modal-body p { margin-bottom: 1em; }

/* WRITE */
.write-wrap { max-width: 820px; margin: 0 auto; padding: 50px 20px; }
.section-title { font-family: monospace; font-size: 13px; letter-spacing: 4px; color: var(--gold); margin-bottom: 36px; padding-bottom: 16px; border-bottom: 2px solid var(--border); }
.fg { margin-bottom: 24px; }
.fg label { display: block; font-family: monospace; font-size: 11px; letter-spacing: 2px; color: var(--muted); margin-bottom: 8px; }
.fg input, .fg select, .fg textarea { width: 100%; background: var(--mid); border: 1px solid var(--border); border-radius: 4px; color: var(--white); font-family: Georgia, serif; font-size: 15px; padding: 12px 16px; outline: none; transition: border-color 0.2s; }
.fg input:focus, .fg select:focus, .fg textarea:focus { border-color: var(--red); }
.fg select option { background: var(--mid); }
.fg textarea { resize: vertical; }

.drop-zone { background: var(--mid); border: 2px dashed var(--border); border-radius: 6px; padding: 40px; text-align: center; cursor: pointer; transition: all 0.2s; }
.drop-zone:hover, .drop-zone.dragover { border-color: var(--red); background: rgba(200,16,46,0.06); }
.drop-icon { font-size: 34px; margin-bottom: 10px; }
.drop-zone p { color: var(--text); font-size: 14px; margin-bottom: 4px; }
.drop-zone span { font-family: monospace; font-size: 11px; color: var(--muted); }
.img-preview { position: relative; margin-top: 12px; }
.img-preview img { width: 100%; max-height: 280px; object-fit: cover; border-radius: 4px; border: 1px solid var(--border); }
.rm-img { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.75); color: #fff; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; padding: 6px 12px; font-family: monospace; font-size: 11px; cursor: pointer; }
.rm-img:hover { background: var(--red); }

.toolbar { display: flex; gap: 4px; background: var(--mid); border: 1px solid var(--border); border-bottom: none; border-radius: 4px 4px 0 0; padding: 8px 10px; }
.tb { background: none; border: 1px solid transparent; color: var(--muted); width: 30px; height: 30px; border-radius: 3px; cursor: pointer; font-size: 14px; transition: all 0.15s; }
.tb:hover { background: var(--border); color: var(--white); }
.editor { background: var(--mid); border: 1px solid var(--border); border-radius: 0 0 4px 4px; padding: 16px; min-height: 280px; font-family: Georgia, serif; font-size: 16px; line-height: 1.8; color: var(--white); outline: none; }
.editor:focus { border-color: var(--red); }
.editor:empty::before { content: attr(placeholder); color: var(--muted); pointer-events: none; }

.form-actions { display: flex; gap: 12px; margin-top: 28px; }
.btn-p { background: var(--red); color: #fff; border: none; font-family: monospace; font-size: 12px; letter-spacing: 2px; padding: 14px 28px; border-radius: 3px; cursor: pointer; transition: background 0.2s; }
.btn-p:hover { background: var(--dark-red); }
.btn-s { background: none; color: var(--muted); border: 1px solid var(--border); font-family: monospace; font-size: 12px; letter-spacing: 2px; padding: 14px 28px; border-radius: 3px; cursor: pointer; transition: all 0.2s; }
.btn-s:hover { color: var(--white); border-color: var(--muted); }
.pub-msg { margin-top: 16px; padding: 12px 18px; border-radius: 4px; font-family: monospace; font-size: 13px; display: none; }
.pub-msg.ok { background: rgba(40,167,69,0.15); border: 1px solid rgba(40,167,69,0.4); color: #6dcf7e; }
.pub-msg.err { background: rgba(200,16,46,0.15); border: 1px solid rgba(200,16,46,0.4); color: #e87985; }

/* APPLY */
.apply-wrap { max-width: 820px; margin: 0 auto; padding: 50px 20px; }
.apply-head { display: flex; align-items: center; gap: 24px; margin-bottom: 50px; padding-bottom: 28px; border-bottom: 2px solid var(--border); }
.apply-badge { width: 80px; height: 80px; background: var(--red); color: #fff; font-size: 52px; font-weight: 900; display: flex; align-items: center; justify-content: center; border-radius: 6px; flex-shrink: 0; box-shadow: 0 0 0 4px var(--dark-red), 0 8px 30px rgba(200,16,46,0.4); }
.apply-head h2 { font-size: 30px; color: var(--white); letter-spacing: 2px; margin-bottom: 8px; }
.apply-head p { color: var(--muted); font-size: 14px; line-height: 1.6; }
.asec { margin-bottom: 40px; }
.asec h3 { font-family: monospace; font-size: 11px; letter-spacing: 3px; color: var(--gold); margin-bottom: 18px; padding-bottom: 10px; border-bottom: 1px solid var(--border); }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.sec-desc { color: var(--muted); font-size: 14px; margin-bottom: 18px; line-height: 1.6; }
.scenario-lbl { display: flex; flex-direction: column; gap: 8px; font-size: 14px; color: var(--text); line-height: 1.5; margin-bottom: 10px; }
.s-tag { font-family: monospace; font-size: 10px; letter-spacing: 2px; color: var(--red); background: rgba(200,16,46,0.15); border: 1px solid rgba(200,16,46,0.3); padding: 3px 8px; border-radius: 2px; display: inline-block; align-self: flex-start; }
.success-box { text-align: center; padding: 80px 40px; animation: fi 0.35s ease; }
@keyframes fi { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
.success-icon { width: 80px; height: 80px; background: rgba(40,167,69,0.12); border: 2px solid rgba(40,167,69,0.4); color: #6dcf7e; font-size: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px; }
.success-box h3 { font-size: 26px; color: var(--white); margin-bottom: 12px; }
.success-box p { color: var(--muted); font-size: 14px; max-width: 480px; margin: 0 auto 24px; line-height: 1.7; }

/* FOOTER */
.site-footer { background: var(--dark); border-top: 1px solid var(--border); margin-top: 60px; padding: 28px 40px; }
.footer-in { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
.footer-logo { display: flex; align-items: center; gap: 10px; font-size: 17px; font-weight: 700; color: var(--white); }
.site-footer p { font-family: monospace; font-size: 11px; color: var(--muted); }

@media(max-width:768px){
  .header-main{padding:16px 20px;}
  .logo-city{font-size:24px;}
  .logo-badge{width:48px;height:48px;font-size:32px;}
  .main-nav{padding:0 10px;}
  .nav-btn{padding:12px 10px;font-size:10px;letter-spacing:1px;}
  .hero-article{grid-template-columns:1fr;}
  .hero-img-wrap img,.hero-no-img{min-height:220px;}
  .form-row{grid-template-columns:1fr;}
  .footer-in{flex-direction:column;gap:12px;text-align:center;}
}
</style>
</head>
<body>

<!-- BREAKING BAR -->
<div class="breaking-bar">
  <div class="breaking-label"><div class="live-dot"></div>LIVE</div>
  <div class="ticker-wrap">
    <div class="ticker" id="ticker">DENVER NEWS STATION 5 &nbsp;â€¢&nbsp; YOUR LOCAL SOURCE FOR TRUTH &nbsp;â€¢&nbsp; STAY INFORMED, DENVER &nbsp;â€¢&nbsp; BREAKING NEWS AS IT HAPPENS</div>
  </div>
</div>

<!-- HEADER -->
<div class="site-header">
  <div class="header-main">
    <div class="header-logo">
      <div class="logo-badge">5</div>
      <div>
        <span class="logo-city">DENVER</span>
        <span class="logo-sub">NEWS STATION</span>
      </div>
    </div>
    <div class="header-date" id="headerDate"></div>
  </div>
  <nav class="main-nav">
    <button class="nav-btn active" onclick="showTab('home')">HOME</button>
    <button class="nav-btn" onclick="showTab('write')">WRITE ARTICLE</button>
    <button class="nav-btn" onclick="showTab('apply')">APPLY</button>
  </nav>
</div>

<!-- HOME TAB -->
<div id="tab-home" class="tab active">
  <div class="homepage">
    <div id="heroSlot"><div class="hero-placeholder">No articles yet â€” go write your first story!</div></div>
    <div class="news-grid" id="newsGrid"></div>
  </div>
</div>

<!-- WRITE TAB -->
<div id="tab-write" class="tab">
  <div class="write-wrap">
    <div class="section-title">WRITE AN ARTICLE</div>
    <div class="fg">
      <label>HEADLINE *</label>
      <input type="text" id="artHeadline" placeholder="Enter your headline...">
    </div>
    <div class="fg">
      <label>CATEGORY</label>
      <select id="artCategory">
        <option>Breaking News</option><option>Local</option><option>Crime</option>
        <option>Weather</option><option>Sports</option><option>Politics</option>
        <option>Community</option><option>Accident</option><option>Investigation</option>
      </select>
    </div>
    <div class="fg">
      <label>REPORTER NAME *</label>
      <input type="text" id="artReporter" placeholder="Your name...">
    </div>
    <div class="fg">
      <label>ARTICLE IMAGE</label>
      <div class="drop-zone" id="dropZone" onclick="document.getElementById('imgInput').click()">
        <div class="drop-icon">ðŸ“·</div>
        <p>Click to upload or drag &amp; drop an image</p>
        <span>JPG, PNG, GIF, WEBP supported</span>
        <input type="file" id="imgInput" accept="image/*" style="display:none" onchange="handleImg(event)">
      </div>
      <div class="img-preview" id="imgPreview" style="display:none">
        <img id="previewImg" src="" alt="Preview">
        <button class="rm-img" onclick="removeImg()">âœ• Remove</button>
      </div>
    </div>
    <div class="fg">
      <label>IMAGE CAPTION</label>
      <input type="text" id="artCaption" placeholder="Describe the image...">
    </div>
    <div class="fg">
      <label>ARTICLE BODY *</label>
      <div class="toolbar">
        <button class="tb" onclick="fmt('bold')" title="Bold"><b>B</b></button>
        <button class="tb" onclick="fmt('italic')" title="Italic"><i>I</i></button>
        <button class="tb" onclick="fmt('underline')" title="Underline"><u>U</u></button>
        <button class="tb" onclick="fmt('insertParagraph')" title="New Paragraph">Â¶</button>
      </div>
      <div id="artBody" class="editor" contenteditable="true" placeholder="Write your article here..."></div>
    </div>
    <div class="form-actions">
      <button class="btn-p" onclick="publish()">PUBLISH ARTICLE</button>
      <button class="btn-s" onclick="clearForm()">CLEAR</button>
    </div>
    <div class="pub-msg" id="pubMsg"></div>
  </div>
</div>

<!-- APPLY TAB -->
<div id="tab-apply" class="tab">
  <div class="apply-wrap">
    <div id="applyFormWrap">
      <div class="apply-head">
        <div class="apply-badge">5</div>
        <div>
          <h2>JOIN OUR TEAM</h2>
          <p>Denver News Station 5 is looking for passionate reporters, journalists, and media professionals. Fill out the form below to apply.</p>
        </div>
      </div>
      <form onsubmit="submitApp(event)">
        <div class="asec">
          <h3>YOUR ACCOUNTS</h3>
          <div class="form-row">
            <div class="fg">
              <label>DISCORD USERNAME *</label>
              <input type="text" id="appDiscord" placeholder="username or @username" required>
            </div>
            <div class="fg">
              <label>ROBLOX USERNAME *</label>
              <input type="text" id="appRoblox" placeholder="Your Roblox username" required>
            </div>
          </div>
        </div>
        <div class="asec">
          <h3>EXPERIENCE</h3>
          <div class="fg">
            <label>PAST EXPERIENCE *</label>
            <textarea id="appExp" rows="5" placeholder="Describe your previous journalism, writing, broadcasting, or media experience. Include any groups, stations, or roles you've held..." required></textarea>
          </div>
        </div>
        <div class="asec">
          <h3>WRITING SAMPLES</h3>
          <p class="sec-desc">Write realistic news reports for each scenario below. Include a headline, lead paragraph, key details, and a closing statement.</p>
          <div class="fg">
            <div class="scenario-lbl">
              <span class="s-tag">SCENARIO 1 â€” BREAKING NEWS</span>
              How would you write a report on a fire at a hospital?
            </div>
            <textarea id="appFire" rows="9" placeholder="Write your full news report here. Example start: 'BREAKING: Fire Breaks Out at Denver General Hospital â€” Patients Being Evacuated'..." required></textarea>
          </div>
          <div class="fg">
            <div class="scenario-lbl">
              <span class="s-tag">SCENARIO 2 â€” CRIME</span>
              How would you write a report on someone who murdered 4 people and was arrested?
            </div>
            <textarea id="appMurder" rows="9" placeholder="Write your full news report here. Include headline, lead paragraph, suspect details, charges filed, and community response..." required></textarea>
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-p">SUBMIT APPLICATION</button>
        </div>
      </form>
    </div>
    <div id="applySuccess" class="success-box" style="display:none">
      <div class="success-icon">âœ“</div>
      <h3>APPLICATION SUBMITTED!</h3>
      <p>Thank you for applying to Denver News Station 5. Our team will review your application and reach out via Discord shortly.</p>
      <button class="btn-s" style="margin-top:8px" onclick="resetApp()">SUBMIT ANOTHER APPLICATION</button>
    </div>
  </div>
</div>

<footer class="site-footer">
  <div class="footer-in">
    <div class="footer-logo"><div class="logo-badge sm">5</div> Denver News Station 5</div>
    <p>Â© 2025 Denver News Station 5. All Rights Reserved.</p>
  </div>
</footer>

<script>
// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let articles = [];
let imgData = null;

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('load', function() {
  loadFromStorage();
  renderHome();
  startClock();
  setupDrag();
});

function startClock() {
  function tick() {
    var n = new Date();
    var opts = { weekday:'long', year:'numeric', month:'long', day:'numeric' };
    document.getElementById('headerDate').innerHTML =
      n.toLocaleDateString('en-US', opts).toUpperCase() + '<br>' +
      n.toLocaleTimeString('en-US');
  }
  tick();
  setInterval(tick, 1000);
}

// â”€â”€ TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showTab(name) {
  document.querySelectorAll('.tab').forEach(function(t){ t.classList.remove('active'); });
  document.querySelectorAll('.nav-btn').forEach(function(b){ b.classList.remove('active'); });
  document.getElementById('tab-' + name).classList.add('active');
  var idx = {home:0, write:1, apply:2};
  document.querySelectorAll('.nav-btn')[idx[name]].classList.add('active');
}

// â”€â”€ STORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadFromStorage() {
  try {
    var d = localStorage.getItem('dns5');
    articles = d ? JSON.parse(d) : [];
  } catch(e) { articles = []; }
}

function save() {
  try {
    localStorage.setItem('dns5', JSON.stringify(articles));
  } catch(e) {
    alert('Storage is full! Try using smaller images or clearing old articles.');
  }
}

// â”€â”€ IMAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handleImg(e) {
  var file = e.target.files[0];
  if (file) readImg(file);
}

function readImg(file) {
  var r = new FileReader();
  r.onload = function(e) {
    imgData = e.target.result;
    document.getElementById('previewImg').src = imgData;
    document.getElementById('imgPreview').style.display = 'block';
    document.getElementById('dropZone').style.display = 'none';
  };
  r.readAsDataURL(file);
}

function removeImg() {
  imgData = null;
  document.getElementById('imgInput').value = '';
  document.getElementById('imgPreview').style.display = 'none';
  document.getElementById('dropZone').style.display = 'block';
}

function setupDrag() {
  var z = document.getElementById('dropZone');
  z.addEventListener('dragover', function(e){ e.preventDefault(); z.classList.add('dragover'); });
  z.addEventListener('dragleave', function(){ z.classList.remove('dragover'); });
  z.addEventListener('drop', function(e){
    e.preventDefault();
    z.classList.remove('dragover');
    var f = e.dataTransfer.files[0];
    if (f && f.type.startsWith('image/')) readImg(f);
  });
}

// â”€â”€ FORMAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmt(cmd) {
  document.getElementById('artBody').focus();
  document.execCommand(cmd, false, null);
}

// â”€â”€ PUBLISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function publish() {
  var headline = document.getElementById('artHeadline').value.trim();
  var reporter = document.getElementById('artReporter').value.trim();
  var category = document.getElementById('artCategory').value;
  var caption  = document.getElementById('artCaption').value.trim();
  var bodyEl   = document.getElementById('artBody');
  var bodyHTML = bodyEl.innerHTML.trim();
  var bodyTxt  = bodyEl.innerText.trim();

  if (!headline) { showMsg('Please enter a headline.', 'err'); return; }
  if (!reporter) { showMsg('Please enter your reporter name.', 'err'); return; }
  if (!bodyTxt)  { showMsg('Please write the article body.', 'err'); return; }

  articles.unshift({
    id: Date.now(),
    headline: headline,
    reporter: reporter,
    category: category,
    caption: caption,
    bodyHTML: bodyHTML,
    image: imgData,
    date: new Date().toISOString()
  });

  save();
  renderHome();
  updateTicker();
  clearForm();
  showMsg('âœ“ Article published!', 'ok');
  setTimeout(function(){ showTab('home'); }, 1200);
}

function clearForm() {
  ['artHeadline','artReporter','artCaption'].forEach(function(id){
    document.getElementById(id).value = '';
  });
  document.getElementById('artBody').innerHTML = '';
  document.getElementById('artCategory').selectedIndex = 0;
  removeImg();
  document.getElementById('pubMsg').style.display = 'none';
}

function showMsg(text, type) {
  var el = document.getElementById('pubMsg');
  el.textContent = text;
  el.className = 'pub-msg ' + type;
  el.style.display = 'block';
}

// â”€â”€ RENDER HOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderHome() {
  var hero = document.getElementById('heroSlot');
  var grid = document.getElementById('newsGrid');

  if (!articles.length) {
    hero.innerHTML = '<div class="hero-placeholder">No articles yet â€” go write your first story!</div>';
    grid.innerHTML = '';
    return;
  }

  var a = articles[0];
  var imgBlock = a.image
    ? '<div class="hero-img-wrap"><img src="' + a.image + '" alt="' + esc(a.caption||a.headline) + '"></div>'
    : '<div class="hero-no-img">5</div>';

  hero.innerHTML =
    '<div class="hero-article" onclick="openArticle(' + a.id + ')">' +
      imgBlock +
      '<div class="hero-info">' +
        '<span class="cat-tag">' + esc(a.category) + '</span>' +
        '<h2>' + esc(a.headline) + '</h2>' +
        '<div class="art-meta">BY ' + esc(a.reporter).toUpperCase() + ' &nbsp;|&nbsp; ' + fmtDate(a.date) + '</div>' +
        '<p class="hero-excerpt">' + excerpt(a.bodyHTML, 200) + '</p>' +
        '<button class="read-btn" onclick="event.stopPropagation();openArticle(' + a.id + ')">READ MORE &rarr;</button>' +
      '</div>' +
    '</div>';

  grid.innerHTML = articles.slice(1).map(function(a) {
    var img = a.image
      ? '<img class="card-img" src="' + a.image + '" alt="' + esc(a.caption||a.headline) + '">'
      : '<div class="card-no-img">5</div>';
    return '<div class="card" onclick="openArticle(' + a.id + ')">' +
      img +
      '<div class="card-body">' +
        '<span class="cat-tag">' + esc(a.category) + '</span>' +
        '<h3>' + esc(a.headline) + '</h3>' +
        '<div class="art-meta">BY ' + esc(a.reporter).toUpperCase() + ' &nbsp;|&nbsp; ' + fmtDate(a.date) + '</div>' +
        '<p class="card-excerpt">' + excerpt(a.bodyHTML, 120) + '</p>' +
      '</div>' +
    '</div>';
  }).join('');
}

// â”€â”€ ARTICLE MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openArticle(id) {
  var a = null;
  for (var i = 0; i < articles.length; i++) {
    if (articles[i].id === id) { a = articles[i]; break; }
  }
  if (!a) return;

  var imgBlock = a.image ? '<img class="modal-img" src="' + a.image + '" alt="' + esc(a.caption||a.headline) + '">' : '';
  var captionBlock = a.caption ? '<div class="modal-caption">' + esc(a.caption) + '</div>' : '';

  var overlay = document.createElement('div');
  overlay.className = 'modal-overlay';
  overlay.innerHTML =
    '<div class="modal-box">' +
      '<button class="modal-close" onclick="this.closest(\'.modal-overlay\').remove()">&#x2715;</button>' +
      imgBlock +
      '<div class="modal-content">' +
        '<span class="cat-tag">' + esc(a.category) + '</span>' +
        '<h2>' + esc(a.headline) + '</h2>' +
        '<div class="art-meta">BY ' + esc(a.reporter).toUpperCase() + ' &nbsp;|&nbsp; ' + fmtDate(a.date) + '</div>' +
        captionBlock +
        '<div class="modal-body">' + a.bodyHTML + '</div>' +
      '</div>' +
    '</div>';

  overlay.addEventListener('click', function(e){ if (e.target === overlay) overlay.remove(); });
  document.body.appendChild(overlay);
}

// â”€â”€ APPLICATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function submitApp(e) {
  e.preventDefault();
  document.getElementById('applyFormWrap').style.display = 'none';
  document.getElementById('applySuccess').style.display = 'block';
}

function resetApp() {
  document.getElementById('applyFormWrap').querySelector('form').reset();
  document.getElementById('applyFormWrap').style.display = 'block';
  document.getElementById('applySuccess').style.display = 'none';
}

// â”€â”€ TICKER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateTicker() {
  if (!articles.length) return;
  var headlines = articles.map(function(a){ return a.headline; }).join(' &nbsp;â€¢&nbsp; ');
  document.getElementById('ticker').innerHTML = headlines;
}

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function esc(s) {
  if (!s) return '';
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function excerpt(html, max) {
  var t = document.createElement('div');
  t.innerHTML = html;
  var text = t.innerText || t.textContent || '';
  return text.length > max ? text.slice(0, max).trim() + '...' : text;
}

function fmtDate(iso) {
  var d = new Date(iso);
  return d.toLocaleDateString('en-US', { month:'short', day:'numeric', year:'numeric' }) +
    ' ' + d.toLocaleTimeString('en-US', { hour:'2-digit', minute:'2-digit' });
}
</script>
</body>
</html>
